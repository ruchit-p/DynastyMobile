# Firebase Functions Environment Variables Template
# This file contains all environment variables used by Firebase Functions
# Copy this file to .env.local for local development
# For production/staging, these are set in Firebase Functions config

# ========================================
# NODE & FIREBASE CONFIGURATION
# ========================================
NODE_ENV=development
FIREBASE_PROJECT_ID=your-firebase-project-id
GCLOUD_PROJECT=your-gcloud-project-id
FUNCTIONS_URL=http://localhost:5001/your-project-id/us-central1

# Firebase Emulator Configuration (for local development)
FIREBASE_AUTH_EMULATOR_HOST=localhost:9099
FIREBASE_STORAGE_EMULATOR_HOST=localhost:9199
FIRESTORE_EMULATOR_HOST=localhost:8080
FUNCTIONS_EMULATOR=true

# ========================================
# FRONTEND & API CONFIGURATION
# ========================================
FRONTEND_URL=http://localhost:3000
BASE_URL=http://localhost:5001
FUNCTION_VERSION=local

# ========================================
# CORS CONFIGURATION
# ========================================
# Comma-separated list of allowed origins
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# ========================================
# EMAIL CONFIGURATION (AWS SES)
# ========================================
EMAIL_PROVIDER=ses

# For local development, use IAM credentials
# For production, use IAM role (no credentials needed)
AWS_ACCESS_KEY_ID=your_aws_access_key_id
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key
AWS_REGION=us-east-1

# SES Configuration JSON (alternative to individual AWS variables)
# This is stored as a Firebase Secret in production
SES_CONFIG={"accessKeyId":"your_key","secretAccessKey":"your_secret","region":"us-east-1","fromEmail":"noreply@yourdomain.com","fromName":"Dynasty"}

SES_FROM_EMAIL=noreply@yourdomain.com
SES_FROM_NAME=Dynasty
SES_REGION=us-east-1

# ========================================
# STORAGE CONFIGURATION
# ========================================
# Storage provider: firebase, b2, or r2
STORAGE_PROVIDER=firebase

# CDN Configuration
CDN_BASE_URL=https://cdn.yourdomain.com
ENABLE_CDN=false

# ========================================
# BACKBLAZE B2 CONFIGURATION
# ========================================
# B2 Configuration JSON (stored as Firebase Secret in production)
B2_CONFIG={"keyId":"your_key_id","applicationKey":"your_app_key","bucketName":"your_bucket","bucketId":"your_bucket_id"}

# Individual B2 settings (legacy - prefer B2_CONFIG)
B2_BASE_BUCKET=your-b2-bucket-name
B2_BUCKET_ID=your-b2-bucket-id
B2_ENDPOINT=https://s3.us-west-004.backblazeb2.com
B2_REGION=us-west-004
B2_DOWNLOAD_URL=https://f004.backblazeb2.com/file
B2_KEY_ID=your_b2_key_id
B2_APPLICATION_KEY=your_b2_application_key

# B2 Migration flags
ENABLE_B2_MIGRATION=false
B2_MIGRATION_ENABLED=false
B2_MIGRATION_PERCENTAGE=0
ENABLE_STORAGE_MIGRATION=false

# ========================================
# CLOUDFLARE R2 CONFIGURATION (Being phased out)
# ========================================
# R2 Configuration JSON (stored as Firebase Secret in production)
R2_CONFIG={"accountId":"your_account_id","accessKeyId":"your_access_key","secretAccessKey":"your_secret_key"}

# Individual R2 settings (legacy - prefer R2_CONFIG)
R2_BASE_BUCKET=your-r2-bucket-name
R2_ENDPOINT=https://your-account-id.r2.cloudflarestorage.com
R2_ACCOUNT_ID=your_r2_account_id
R2_ACCESS_KEY_ID=your_r2_access_key_id
R2_SECRET_ACCESS_KEY=your_r2_secret_access_key

# R2 Migration flags
ENABLE_R2_MIGRATION=false
R2_MIGRATION_ENABLED=false
R2_MIGRATION_PERCENTAGE=0
ENABLE_R2_TESTS=false

# ========================================
# REDIS CONFIGURATION (Vercel KV / Upstash)
# ========================================
# Vercel KV automatically provides these environment variables
KV_REST_API_URL=your_kv_rest_api_url
KV_REST_API_TOKEN=your_kv_rest_api_token
# Additional Vercel KV variables (optional)
KV_URL=your_kv_url
REDIS_URL=your_redis_url
KV_REST_API_READ_ONLY_TOKEN=your_kv_read_only_token

# Legacy Upstash variables (for backward compatibility)
UPSTASH_REDIS_REST_URL=your_upstash_redis_rest_url
UPSTASH_REDIS_REST_TOKEN=your_upstash_redis_rest_token

# ========================================
# STRIPE CONFIGURATION
# ========================================
# For test mode, use sk_test_xxx keys from https://dashboard.stripe.com/test/apikeys
# For production, use sk_live_xxx keys from https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_endpoint_secret
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key
# Optional: Pin specific API version (e.g., 2023-10-16)
STRIPE_API_VERSION=

# Stripe Product IDs
STRIPE_PRODUCT_INDIVIDUAL_PLUS=prod_xxxxxxxxxxxxx
STRIPE_PRODUCT_FAMILY_2_5TB=prod_xxxxxxxxxxxxx
STRIPE_PRODUCT_FAMILY_7_5TB=prod_xxxxxxxxxxxxx
STRIPE_PRODUCT_FAMILY_12TB=prod_xxxxxxxxxxxxx
STRIPE_PRODUCT_ADDON_1TB=prod_xxxxxxxxxxxxx
STRIPE_PRODUCT_ADDON_2TB=prod_xxxxxxxxxxxxx
STRIPE_PRODUCT_ADDON_5TB=prod_xxxxxxxxxxxxx
STRIPE_PRODUCT_ADDON_20TB=prod_xxxxxxxxxxxxx

# Stripe Price IDs
STRIPE_PRICE_INDIVIDUAL_PLUS_MONTHLY=price_xxxxxxxxxxxxx
STRIPE_PRICE_INDIVIDUAL_PLUS_YEARLY=price_xxxxxxxxxxxxx
STRIPE_PRICE_FAMILY_2_5TB_MONTHLY=price_xxxxxxxxxxxxx
STRIPE_PRICE_FAMILY_2_5TB_YEARLY=price_xxxxxxxxxxxxx
STRIPE_PRICE_FAMILY_7_5TB_MONTHLY=price_xxxxxxxxxxxxx
STRIPE_PRICE_FAMILY_7_5TB_YEARLY=price_xxxxxxxxxxxxx
STRIPE_PRICE_FAMILY_12TB_MONTHLY=price_xxxxxxxxxxxxx
STRIPE_PRICE_FAMILY_12TB_YEARLY=price_xxxxxxxxxxxxx
STRIPE_PRICE_ADDON_1TB_MONTHLY=price_xxxxxxxxxxxxx
STRIPE_PRICE_ADDON_2TB_MONTHLY=price_xxxxxxxxxxxxx
STRIPE_PRICE_ADDON_5TB_MONTHLY=price_xxxxxxxxxxxxx
STRIPE_PRICE_ADDON_20TB_MONTHLY=price_xxxxxxxxxxxxx

# ========================================
# TWILIO CONFIGURATION (SMS)
# ========================================
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_PHONE_NUMBER=+1234567890

# ========================================
# THIRD-PARTY API KEYS
# ========================================
# Google Places API
GOOGLE_PLACES_API_KEY=your_google_places_api_key

# Notion API (for support/feedback)
NOTION_API_KEY=your_notion_api_key
NOTION_DB_ID=your_notion_database_id

# Virus Scanning API
VIRUS_SCAN_API_KEY=your_virus_scan_api_key

# ========================================
# SECURITY & AUTH
# ========================================
# JWT Secret for unsubscribe tokens
UNSUBSCRIBE_JWT_SECRET=your_random_jwt_secret_here

# Secret for cleanup authentication
CLEANUP_SECRET=your_cleanup_secret_here

# ========================================
# TESTING CONFIGURATION
# ========================================
# Suppress Jest console output
JEST_SILENT=false

# Maximum concurrent tests
MAX_CONCURRENT_TESTS=5

# ========================================
# NOTES
# ========================================
# 1. Sensitive values (API keys, secrets) should use Firebase Secret Manager in production
# 2. Non-sensitive configuration can use regular environment variables
# 3. For local development, copy this file to .env.local and fill in your values
# 4. Production values are managed through Firebase Functions configuration
# 5. Some services (SendGrid, FingerprintJS) have been deprecated and removed
# 6. R2 storage is being phased out in favor of B2
# 7. Use IAM roles for AWS services in production (no credentials needed)